CREATE DATABASE  estacionamento;

use estacionamento;

CREATE TABLE CLIENTE (
CPF VARCHAR(11)  NOT NULL PRIMARY KEY, 
NOME VARCHAR(60),
DTNASC DATE
);

CREATE TABLE MODELO (
CODMOD INT NOT NULL PRIMARY KEY,
DESCRICAO2 VARCHAR(40)
);

CREATE TABLE VEICULO (
PLACA VARCHAR(8) NOT NULL PRIMARY KEY,
MODELO_CODMOD INT,
CLIENTE_CPF VARCHAR(11),
COR VARCHAR(20),
FOREIGN KEY (MODELO_CODMOD) REFERENCES MODELO (CODMOD), 
FOREIGN KEY (CLIENTE_CPF) REFERENCES CLIENTE(CPF)
);

CREATE TABLE PATIO(
	NUM INT NOT NULL PRIMARY KEY,
	endereco VARCHAR (40),
	capacidade INT
);

CREATE TABLE ESTACIONA(
    COD INT NOT NULL PRIMARY KEY,
    PATIO_NUM INT,
    VEICULO_PLACA VARCHAR (8),
    DTENTRADA DATE,
    DTSAIDA DATE,
    HSENTRADA TIME,  
    HSSAIDA TIME, 
    FOREIGN KEY (PATIO_NUM) REFERENCES PATIO(NUM),
    FOREIGN KEY (VEICULO_PLACA) REFERENCES VEICULO(PLACA)
);

-- Inserindo dados na tabela CLIENTE (CPF como VARCHAR)
INSERT INTO CLIENTE (CPF, NOME, DTNASC) VALUES
('12345678901', 'João Silva', '1985-05-15'),
('98765432109', 'Maria Oliveira', '1990-08-22'),
('45678912304', 'Carlos Souza', '1978-11-30'),
('32165498703', 'Ana Santos', '1995-03-10'),
('78912345608', 'Pedro Costa', '1982-07-25');

-- Inserindo dados na tabela MODELO
INSERT INTO MODELO (CODMOD, DESCRICAO2) VALUES
(1, 'Sedan Compacto'),
(2, 'SUV Médio'),
(3, 'Hatchback'),
(4, 'Pick-up'),
(5, 'Coupé Esportivo');

-- Inserindo dados na tabela VEICULO (ajustado para CLIENTE_CPF VARCHAR)
INSERT INTO VEICULO (PLACA, MODELO_CODMOD, CLIENTE_CPF, COR) VALUES
('ABC1234', 1, '12345678901', 'Prata'),
('DEF5678', 2, '98765432109', 'Preto'),
('GHI9012', 3, '45678912304', 'Branco'),
('JKL3456', 4, '32165498703', 'Vermelho'),
('MNO7890', 5, '78912345608', 'Azul');

-- Inserindo dados na tabela PATIO
INSERT INTO PATIO (NUM, endereco, capacidade) VALUES
(101, 'Rua A, 100 - Centro', 50),
(102, 'Av. B, 200 - Zona Norte', 30),
(103, 'Rua C, 300 - Zona Sul', 40),
(104, 'Av. D, 400 - Zona Leste', 60),
(105, 'Rua E, 500 - Zona Oeste', 25);

-- Inserindo dados na tabela ESTACIONA
INSERT INTO ESTACIONA (COD, PATIO_NUM, VEICULO_PLACA, DTENTRADA, DTSAIDA, HSENTRADA, HSSAIDA) VALUES
(1, 101, 'ABC1234', '2023-10-01', '2023-10-01', '08:30:00', '17:45:00'),
(2, 102, 'DEF5678', '2023-10-02', '2023-10-03', '09:15:00', '08:30:00'),
(3, 103, 'GHI9012', '2023-10-03', '2023-10-03', '10:00:00', '18:00:00'),
(4, 104, 'JKL3456', '2023-10-04', '2023-10-05', '07:45:00', '09:30:00'),
(5, 105, 'MNO7890', '2023-10-05', '2023-10-05', '14:20:00', '16:45:00'),
(6, 101, 'DEF5678', '2023-10-06', '2023-10-06', '11:30:00', '15:15:00'),
(7, 102, 'GHI9012', '2023-10-07', '2023-10-08', '13:45:00', '10:30:00'),
(8, 103, 'ABC1234', '2023-10-08', '2023-10-08', '16:00:00', '19:30:00'),
(9, 104, 'MNO7890', '2023-10-09', '2023-10-09', '09:30:00', '12:45:00'),
(10, 105, 'JKL3456', '2023-10-10', '2023-10-10', '10:15:00', '14:00:00');

-- PARA MOSTRAR APENAS AS PLACAS DOS VEICULOS --

SELECT
    VEICULO.PLACA
    FROM
    VEICULO;

--  --

SELECT
    VEICULO 
JOIN CLIENTE ON

SELECT
    *
FROM 
    VEICULO;


    SELECT
        V.PLACA
        CL.
    FROM
        VEICULO AS V
        CLIENTE AS CL



SELECT
    V.PLACA,
    C.NOME,
    C.CPF,
    V.CLIENTE_CPF
    FROM 
        VEICULO AS V
    JOIN CLIENTE AS C ON V.CLIENTE_CPF = C.CPF



SELECT
    V.PLACA
    CLIENTE.NOME
FROM
    VEICULO AS 
    JOIN CLIENTE ON V.CLIENTE_CPF = CLIENTE.CPF

SELECT 
    CLIENTE.CPF,
    CLIENTE.NOME,
    VEICULO.PLACA
FROM
    CLIENTE
JOIN VEICULO on CLIENTE.CPF = VEICULO.CLIENTE_CPF

where
    VEICULO.PLACA like "ABC1234";

SELECT
    CLIENTE.NOME
    FROM 
    CLIENTE
WHERE 
CLIENTE.NOME LIKE "a%";


-- NUMERO C Exiba a placa e a cor do veículo que possui o código de estacionamento 1.--

SELECT
    VEICULO.PLACA,
    VEICULO.COR
FROM
    VEICULO
JOIN ESTACIONA ON ESTACIONA.VEICULO_PLACA = VEICULO.PLACA

WHERE
    ESTACIONA.COD;

-- NUMERO D Exiba a placa e o ano do veículo que possui o código de estacionamento 1. --


-- D  --
SELECT
    *
    FROM ESTACIONA
    JOIN VEICULO ON ESTACIONA.VEICULO_PLACA = VEICULO_PLACA
    WHERE 
        ESTACIONA.COD = 1;


-- H --
SELECT 
    CLIENTE
FROM VEICULO
JOIN CLIENTE ON VEICULO.CLIENTE_CPF = CLIENTE_CPF
JOIN MODELO ON VEICULO.MODELO_CODMOD = MODELO_CODMOD

WHERE
    VEICULO.MODELO_CODMOD = 1









